Take a look at the source code, it's pretty well documented.

